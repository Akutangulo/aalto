<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplicación para marcar los tiempos en los remontados - Temporizador de cuenta atrás</title>
    <style>
        .deposito {
            border-style: solid;
            padding: 5px;
            margin: 3px;
            width: 48%; /* El 48% asegura que haya un espacio mínimo entre las dos columnas */
            border: 2px solid #000;
            border-radius: 20px;
            padding: 10px;
        }

        .clear {
            clear: both; /* Añade un elemento con clear:both para evitar que los elementos floten hacia abajo */
        }

          /* Estilo para contadores activos (fondo rojo) */
          .active {
            background-color: red;
        }

        /* Estilo para contadores terminados (fondo verde) */
        .finished {
            background-color: green;
        }

        .end-time {
            font-size: 2em;
        }
        

        .container {
            display: flex;
            justify-content: space-between;
            border: 2px solid #000;
            border-radius: 20px;
            margin: 20px;
        }

        .column {
            flex: 1;
            border: 2px solid #000;
            border-radius: 20px;
            padding: 10px;
        }

        .column:nth-child(odd) {
            background-color: #f2f2f2;
        }

        .column:nth-child(even) {
            background-color: #e0e0e0;
        }

        .minutes-input {
            width: 100%; /* Ajusta el ancho del input para que ocupe todo el contenedor */
            box-sizing: border-box; /* Incluye el padding en el ancho total del input */
            border-radius: 5px;
            margin: 4px;
        }

        /* Estilos para el botón */
        .start-button {
            display: inline-block;
            padding: 10px;
            font-size: 15px;
            background-color: #007BFF;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        /* Estilos adicionales para dispositivos pequeños */
        @media (max-width: 600px) {
            .start-button {
                font-size: 14px;
                padding: 8px;
            }
        }

        .start-button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
   <div class="container">
        <div class="column">
    <div class="deposito">
        <label for="minutesInput1">Deposito 1 - V1:</label>
        <input type="number" id="minutesInput1" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer1">Iniciar remontado</button>
        <div id="timer1" class="timer"></div>
        <div id="endTime1" class="end-time"></div> <!-- Elemento para mostrar la hora de finalización -->
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput2">Deposito 2 - H4:</label>
        <input type="number" id="minutesInput2" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer2">Iniciar remontado</button>
        <div id="timer2" class="timer"></div>
        <div id="endTime2" class="end-time"></div>
        <input type="checkbox" checked style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput3">Deposito 3 - H5:</label>
        <input type="number" id="minutesInput3" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer3">Iniciar remontado</button>
        <div id="timer3" class="timer"></div>
        <div id="endTime3" class="end-time"></div>
        <input type="checkbox" checked style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput4">Deposito 4 - H6:</label>
        <input type="number" id="minutesInput4" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer4">Iniciar remontado</button>
        <div id="timer4" class="timer"></div>
        <div id="endTime4" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput5">Deposito 5 - BD1:</label>
        <input type="number" id="minutesInput5" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer5">Iniciar remontado</button>
        <div id="timer5" class="timer"></div>
        <div id="endTime5" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput6">Deposito 6: - P3</label>
        <input type="number" id="minutesInput6" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer6">Iniciar remontado</button>
        <div id="timer6" class="timer"></div>
        <div id="endTime6" class="end-time"></div>
        <input type="checkbox" checked style="accent-color: red">Automatico
    </div>
    
     <div class="deposito">
        <label for="minutesInput7">Deposito 7:</label>
        <input type="number" id="minutesInput7" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer7">Iniciar remontado</button>
        <div id="timer7" class="timer"></div>
         <div id="endTime7" class="end-time"></div>
         <input type="checkbox" checked style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput8">Deposito 8:</label>
        <input type="number" id="minutesInput8" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer8">Iniciar remontado</button>
        <div id="timer8" class="timer"></div>
         <div id="endTime8" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput9">Deposito 9:</label>
        <input type="number" id="minutesInput9" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer9">Iniciar remontado</button>
        <div id="timer9" class="timer"></div>
         <div id="endTime9" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput10">Deposito 10:</label>
        <input type="number" id="minutesInput10" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer10">Iniciar remontado</button>
        <div id="timer10" class="timer"></div>
         <div id="endTime10" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput11">Deposito 11 - F1:</label>
        <input type="number" id="minutesInput11" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer11">Iniciar remontado</button>
        <div id="timer11" class="timer"></div>
        <div id="endTime11" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput12">Deposito 12 - H3:</label>
        <input type="number" id="minutesInput12" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer12">Iniciar remontado</button>
        <div id="timer12" class="timer"></div>
        <div id="endTime12" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput13">Deposito 13 - H2:</label>
        <input type="number" id="minutesInput13" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer13">Iniciar remontado</button>
        <div id="timer13" class="timer"></div>
        <div id="endTime13" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput14">Deposito 14 - H1:</label>
        <input type="number" id="minutesInput14" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer14">Iniciar remontado</button>
        <div id="timer14" class="timer"></div>
        <div id="endTime14" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput15">Deposito 15 - M1:</label>
        <input type="number" id="minutesInput15" class="minutes-input" min="1" step="1" value="40">
        <button class="start-button" data-target="timer15">Iniciar remontado</button>
        <div id="timer15" class="timer"></div>
        <div id="endTime15" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput16">Deposito 16 - P2:</label>
        <input type="number" id="minutesInput16" class="minutes-input" min="1" step="1" value="40">
        <button class="start-button" data-target="timer16">Iniciar remontado</button>
        <div id="timer16" class="timer"></div>
        <div id="endTime16" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput32">Deposito 32:</label>
        <input type="number" id="minutesInput32" class="minutes-input" min="1" step="1" value="40">
        <button class="start-button" data-target="timer32">Iniciar remontado</button>
        <div id="timer32" class="timer"></div>
        <div id="endTime32" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

</div><!-- Fin div column -->
        <div class="clear"></div> <!-- Elemento clear para evitar que los elementos floten hacia abajo -->
<div class="column">
    
     <div class="deposito">
        <label for="minutesInput17">Deposito 17 - A1:</label>
        <input type="number" id="minutesInput17" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer17">Iniciar remontado</button>
        <div id="timer17" class="timer"></div>
         <div id="endTime17" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput18">Deposito 18 - A2:</label>
        <input type="number" id="minutesInput18" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer18">Iniciar remontado</button>
        <div id="timer18" class="timer"></div>
         <div id="endTime18" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput19">Deposito 19 - A3:</label>
        <input type="number" id="minutesInput19" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer19">Iniciar remontado</button>
        <div id="timer19" class="timer"></div>
         <div id="endTime19" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput20">Deposito 20 - H7:</label>
        <input type="number" id="minutesInput20" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer20">Iniciar remontado</button>
        <div id="timer20" class="timer"></div>
         <div id="endTime20" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput21">Deposito 21 - V2:</label>
        <input type="number" id="minutesInput21" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer21">Iniciar remontado</button>
        <div id="timer21" class="timer"></div>
        <div id="endTime21" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput22">Deposito 22:</label>
        <input type="number" id="minutesInput22" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer22">Iniciar remontado</button>
        <div id="timer22" class="timer"></div>
        <div id="endTime22" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput23">Deposito 23:</label>
        <input type="number" id="minutesInput23" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer23">Iniciar remontado</button>
        <div id="timer23" class="timer"></div>
        <div id="endTime23" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput24">Deposito 24:</label>
        <input type="number" id="minutesInput24" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer24">Iniciar remontado</button>
        <div id="timer24" class="timer"></div>
        <div id="endTime24" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput25">Deposito 25 - P1:</label>
        <input type="number" id="minutesInput25" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer25">Iniciar remontado</button>
        <div id="timer25" class="timer"></div>
        <div id="endTime25" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput26">Deposito 26 - E:</label>
        <input type="number" id="minutesInput26" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer26">Iniciar remontado</button>
        <div id="timer26" class="timer"></div>
        <div id="endTime26" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>
    
     <div class="deposito">
        <label for="minutesInput27">Deposito 27 - VB2:</label>
        <input type="number" id="minutesInput27" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer27">Iniciar remontado</button>
        <div id="timer27" class="timer"></div>
         <div id="endTime27" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput28">Deposito 28 - N2:</label>
        <input type="number" id="minutesInput28" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer28">Iniciar remontado</button>
        <div id="timer28" class="timer"></div>
         <div id="endTime28" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput29">Deposito 29 - N1:</label>
        <input type="number" id="minutesInput29" class="minutes-input" min="1" step="1" value="30">
        <button class="start-button" data-target="timer29">Iniciar remontado</button>
        <div id="timer29" class="timer"></div>
         <div id="endTime29" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

     <div class="deposito">
        <label for="minutesInput30">Deposito 30 - VB1:</label>
        <input type="number" id="minutesInput30" class="minutes-input" min="1" step="1" value="40">
        <button class="start-button" data-target="timer30">Iniciar remontado</button>
        <div id="timer30" class="timer"></div>
         <div id="endTime30" class="end-time"></div>
         <input type="checkbox" style="accent-color: red">Automatico
    </div>

    <div class="deposito">
        <label for="minutesInput31">Deposito 31 - B1:</label>
        <input type="number" id="minutesInput31" class="minutes-input" min="1" step="1" value="40">
        <button class="start-button" data-target="timer31">Iniciar remontado</button>
        <div id="timer31" class="timer"></div>
        <div id="endTime31" class="end-time"></div>
        <input type="checkbox" style="accent-color: red">Automatico
    </div>

   

    </div><!-- Fin div column -->
    </div><!-- Fin div container -->

<script>
        const startButtons = document.querySelectorAll(".start-button");
        const minutesInputs = document.querySelectorAll(".minutes-input");

        // Agregar un evento de confirmación antes de actualizar la página
        window.onbeforeunload = function (e) {
            if (contadoresActivos()) {
                return "¿Estás seguro de que deseas reiniciar los contadores?";
            }
        };

        function contadoresActivos() {
            const timers = document.querySelectorAll(".timer");
            for (const timer of timers) {
                if (!timer.classList.contains("finished")) {
                    return true;
                }
            }
            return false;
        }

        startButtons.forEach((button, index) => {
            button.addEventListener("click", function () {
                // Deshabilitar el botón para evitar que se inicie una cuenta atrás múltiples veces
                this.disabled = true;

                // Obtener el tiempo en minutos ingresado por el usuario
                const minutosElegidos = parseInt(minutesInputs[index].value);
                let segundosRestantes = minutosElegidos * 60;

                const timerDisplay = document.getElementById(button.getAttribute("data-target"));
                const endTimeDisplay = document.getElementById(`endTime${index + 1}`);

                const audio = new Audio('Isabella_Late_Lp.mp3'); // Cambia 'alarma.mp3' por el nombre de tu archivo de sonido

                // Calcular la hora de finalización
                const horaFinalizacion = new Date();
                horaFinalizacion.setMinutes(horaFinalizacion.getMinutes() + minutosElegidos);

                const intervalId = setInterval(function () {
                    const minutos = Math.floor(segundosRestantes / 60);
                    const segundos = segundosRestantes % 60;

                    timerDisplay.innerHTML = `${minutos}:${segundos < 10 ? '0' : ''}${segundos}`;

                    if (segundosRestantes === 0) {
                        clearInterval(intervalId);
                        timerDisplay.innerHTML = "¡Tiempo agotado!";
                        // Reproduce la alarma
                        audio.play();
                        // Cambia la clase a "finished" para aplicar el estilo verde
                        timerDisplay.classList.add("finished");
                    } else {
                        segundosRestantes--;
                        // Actualizar la hora de finalización en cada ciclo
                        endTimeDisplay.innerHTML = `Finaliza a las ${horaFinalizacion.getHours()}:${horaFinalizacion.getMinutes()}`;
                        // Cambia la clase a "active" para aplicar el estilo rojo
                        timerDisplay.classList.add("active");
                    }
                }, 1000);
            });
        });
    </script>
</body>
</html>
